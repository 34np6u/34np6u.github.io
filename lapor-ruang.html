<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./default.css"> 
    <title>bas</title>
</head>
<body>
    <h2>Asesmen</h2> 
    <table> 
        <tr>
            <td>Asal</td>
            <td>
                <input type="radio" name="pin" id="pin-igd">
                <label for="pin-igd">IGD</label>
                &emsp;
                <input type="radio" name="pin" id="pin-rps">
                <label for="pin-rps">RPS</label> 
                &emsp;
                <input type="text" id="pin-lain" autocomplete="off" placeholder="unit lain" style="width: 60px;">
                <button type="button" onclick="resetPindahan()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"/></svg>
                </button>
            </td>
        </tr>
        <tr>
            <td>Identitas</td>
            <td>
                <input type="radio" name="alias" id="alias-tn">
                <label for="alias-tn">Tn.</label>
                &emsp;
                <input type="radio" name="alias" id="alias-ny">
                <label for="alias-ny">Ny.</label>
                &emsp;
                <input type="radio" name="alias" id="alias-sdr">
                <label for="alias-sdr">Sdr.</label>
                &emsp;
                <input type="radio" name="alias" id="alias-sdri">
                <label for="alias-sdri">Sdri.</label> 
                <br><br>
                <input type="text" id="name" autocomplete="off" placeholder="nama pasien" class="fit">
                <br><br>
                <input type="text" id="age" autocomplete="off" placeholder="usia" style="width: 50px;"> tahun<br>
            </td>
        </tr>
        <tr>
            <td>Diagnosa</td>
            <td>
                <input class="fit" type="text" id="diagnosa" autocomplete="off" placeholder="diagnosa">
            </td>
        </tr>
        <tr>
            <td>Keluhan</td>
            <td>
                <textarea id="keluhan" rows="4" placeholder="keluhan"></textarea>
            </td>
        </tr> 
        <tr>
            <td>Tindakan</td>
            <td>
                <input class="fit" type="text" id="tindakan" autocomplete="off" placeholder="tindakan">
            </td>
        </tr>
        <tr>
            <td>Penunjang</td>
            <td> 
                <input type="checkbox" name="penunjang" id="lab" value="Lab"> <label for="lab">Lab</label>&emsp;
                <input type="checkbox" name="penunjang" id="thorax" value="Thorax"> <label for="thorax">Thorax</label>&emsp;
                <input type="checkbox" name="penunjang" id="ecg" value="ECG"> <label for="ecg">ECG</label>
                <hr>
                <input type="checkbox" name="penunjang" id="usg" value="USG"> <label for="usg">USG</label>&emsp;
                <input type="checkbox" name="penunjang" id="ctScan" value="CT-Scan"> <label for="ctScan">CT-Scan</label>&emsp;
                <input type="checkbox" name="penunjang" id="bof" value="BOF"> <label for="bof">BOF</label> 
            </td>
        </tr>
    </table>
    
    <h2>Tanda Vital (TTV)</h2> 
    <table>
        <tr>
            <td>Tensi</td>
            <td>
                <input type="text" id="sis" autocomplete="off" style="width: 50px;"> /
                <input type="text" id="dia" autocomplete="off" style="width: 50px;"> mmHg
            </td>
        </tr>
        <tr>
            <td>Nadi</td>
            <td><input type="text" id="n" autocomplete="off" style="width: 50px;"> x/menit</td>
        </tr>
        <tr>
            <td>Suhu</td>
            <td><input type="text" id="s" value="36" autocomplete="off" style="width: 50px;"> C</td>
        </tr>
        <tr>
            <td>RR</td>
            <td><input type="text" id="rr" value="20" autocomplete="off" style="width: 50px;"> x/w</td>
        </tr>
        <tr>
            <td>SpO2</td>
            <td><input type="text" id="spo2" autocomplete="off" style="width: 50px;"> %</td>
        </tr>
    </table> 

    <button type="button" onclick="compose()" style="width: 100%; height: 50px; margin: 10px 0px;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm56 256c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l144 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-144 0z"/></svg>
        Compose
    </button>
      
    <script>  
        function compose(){
            // tentukan waktu lapor
            const date = new Date();
            let hour = date.getHours(); 
            let sapa; 
            if (hour < 11) {
                sapa = 'pagi';
            } else if (hour > 10 && hour < 15) {
                sapa = 'siang';    
            } else if (hour > 14 && hour < 18) {
                sapa = 'sore';
            } else {
                sapa = 'malam';
            } 

            // pindahan
            let pindahan;
            if (document.getElementById('pin-igd').checked == true) {
                pindahan = 'IGD';
            } else if (document.getElementById('pin-rps').checked == true) {
                pindahan = 'RPS';
            } else {
                pindahan = document.getElementById('pin-lain').value;
            } 
 
            // tentukan alias
            let alias;
            if (document.getElementById('alias-tn').checked == true) {
                alias = 'Tn. ';
            } else if (document.getElementById('alias-ny').checked == true) {
                alias = 'Ny. ';
            } else if (document.getElementById('alias-sdr').checked == true) {
                alias = 'Sdr. ';
            } else if (document.getElementById('alias-sdri').checked == true) {
                alias = 'Sdri. ';
            } else {
                alias = '';
            }

            // ubah nama ke huruf besar
            let getName = document.getElementById('name').value;
            let name = getName.toUpperCase(); 

            // usia 
            let age = document.getElementById('age').value;

            // dengan diagnosa atau tidak
            let diagnosa;
            let getDiagnosa = document.getElementById('diagnosa').value;
            if (getDiagnosa == '') {
                diagnosa = '%0A%0A';
            } else {
                diagnosa = '%0Adengan ' + getDiagnosa + '%0A%0A';
            } 
        
            let keluhan = document.getElementById('keluhan').value;
            let sis = document.getElementById('sis').value;
            let dia = document.getElementById('dia').value;
            let n = document.getElementById('n').value;
            let su = document.getElementById('s').value;
            let rr = document.getElementById('rr').value;
            let spo2 = document.getElementById('spo2').value;

            // Rencana tindakan
            let tindakan;
            let getTindakan = document.getElementById('tindakan').value;
            if (getTindakan == '') {
                tindakan = '%0A';
            } else {
                tindakan = '%0A`Rencana Tindakan`%0A' + '- ' + getTindakan + '%0A%0A';
            } 

            // cek penunjang
            let penunjang = document.querySelectorAll('input[type=checkbox]:checked');
            let listPenunjang = ''; 
            for (var i = 0; i < penunjang.length; i++) {
                listPenunjang += '- ' + penunjang[i].value + '%0A';
            } 

            // compose message
            let url = 'http://wa.me/+6281515066734?text='; 
            let msg = 
                'Selamat ' + sapa + ' dokter,%0A' +
                'Melaporkan pasien baru pindahan dari ' + pindahan + '%0A%0A' + 
                '*a/n ' + alias + name + ' / ' + age + 'th*' + 
                
                diagnosa +
                
                'Keluhan : ' + keluhan + '%0A%0A' +
 
                '```' + 
                'GCS  : 456%0A' +
                'TD   : ' + sis + '/' + dia + ' mmHg%0A' +
                'Nadi : ' +  n + ' x/menit%0A' +
                'Suhu : ' +  su + ' C%0A' +
                'RR   : ' +  rr + ' x%0A' +
                'Spo2 : ' +  spo2 + ' %' + 
                '```%0A%0A' +

                '`Terapi`%0A' +
                '- ' + 
                '%0A%0A' +
                
                '`Penujang`%0A' +
                listPenunjang + 
                
                tindakan + 
 
                'Apakah ada advis tambahan dokter? %0A' +
                'Terimakasih ..';
                 
            window.open(url + msg, '_blank'); 
        }

        function resetPindahan(){  
            document.getElementById('pin-igd').checked = false;
            document.getElementById('pin-rps').checked = false;
            document.getElementById('pin-lain').value = '';
        }   
    </script>
</body>
</html>